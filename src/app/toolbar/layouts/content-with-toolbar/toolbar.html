<div layout="row" layout-align="space-between center">

    <div layout="row" layout-align="start center">
      <md-button id="navigation-toggle" class="md-icon-button" ng-click="vm.toggleSidenav('navigation')"
                 hide-gt-sm aria-label="Toggle navigation">
        <md-icon md-font-icon="icon-menu" class="icon"></md-icon>
      </md-button>
    </div>

    <div layout="row" layout-align="start center">

      <md-progress-circular id="toolbar-progress" ng-if="$root.loadingProgress" class="md-accent"
                            md-mode="indeterminate" md-diameter="32">
      </md-progress-circular>
      <div style="width: 10px" hide-xs></div>

      <div class="toolbar-separator"></div>

        <md-menu-bar id="user-menu">
            <md-menu md-position-mode="left bottom">
                <md-button class="user-button" ng-click="$mdOpenMenu()"
                           aria-label="User settings"
                           translate translate-attr-aria-label="TOOLBAR.USER_SETTINGS">
                    <div layout="row" layout-align="space-between center">
                        <div class="avatar-wrapper">
                            <img md-menu-align-target class="avatar" ng-if="!vm.currentUser.avatarUrl" src="assets/images/avatars/profile.jpg">
                            <img ng-if="vm.currentUser.avatarUrl" class="md-avatar avatar contact-avatar" ng-src="{{vm.currentUser.avatarUrl}}" alt="{{vm.currentUser.firstName + ' ' + vm.currentUser.lastName}}">
                            <md-icon md-font-icon ng-class="vm.userStatus.icon"
                                     ng-style="{'color': vm.userStatus.color }"
                                     class="icon status s16">
                            </md-icon>
                        </div>
                        <span class="username" hide-sm>{{vm.userName}}</span>
                        <md-icon md-font-icon="icon-chevron-down"
                                 class="icon s16" hide-sm></md-icon>
                    </div>
                </md-button>

                <md-menu-content width="3">
                    <md-menu-item class="md-indent" ui-sref="app.profile">
                        <md-icon md-font-icon="icon-account" class="icon"></md-icon>
                        <md-button>My Profile</md-button>
                    </md-menu-item>

                  <md-menu-item class="md-indent" ng-click="vm.voicemailClick()">
                    <md-icon md-font-icon="icon-email" class="icon"></md-icon>
                    <md-button>Voicemail</md-button>
                  </md-menu-item>

                  <md-menu-item class="md-indent" ui-sref="app.voiceMail">
                    <md-icon md-font-icon="icon-phone" class="icon"></md-icon>
                    <md-button>{{vm.userExtension}}</md-button>
                  </md-menu-item>

                  <md-menu-divider></md-menu-divider>

                    <md-menu-item class="md-indent">
                        <md-icon md-font-icon="icon-logout" class="icon"></md-icon>
                        <md-button ng-click="vm.logout()">Logout</md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </md-menu-bar>

        <div class="toolbar-separator"></div>
        <md-menu-bar id="state_menu">

          <md-menu class="language-menu" md-offset="0 72" md-position-mode="target-right target">
              <md-button class="language-button" ng-click="$mdOpenMenu()"
                         aria-label="Language" md-menu-origin md-menu-align-target>
                <md-icon md-font-icon="{{vm.userStatus.icon}}" ng-style="{'color': vm.userStatus.color }"
                         class="icon"></md-icon>
              </md-button>

              <md-menu-content width="3" id="language-menu-content">
                <md-menu-item class="status md-indent"
                              ng-class="{'selected': status === vm.userStatus}"
                              ng-repeat="status in vm.userStatusOptions">
                  <md-icon md-font-icon="{{status.icon}}" ng-style="{'color': status.color }"
                           class="icon"></md-icon>
                  <md-button ng-click="vm.setUserStatus(status)">
                    {{status.title}}
                  </md-button>
                </md-menu-item>
              </md-menu-content>

          </md-menu>
        </md-menu-bar>

        <div class="toolbar-separator"></div>

        <md-button id="quick-panel-toggle" class="md-icon-button" ng-click="vm.toggleSidenav('quick-panel')"
                   aria-label="Toggle quick panel" translate translate-attr-aria-label="TOOLBAR.TOGGLE_QUICK_PANEL">
            <img src="assets/images/patterns/dialpad.png">
        </md-button>
    </div>
</div>
